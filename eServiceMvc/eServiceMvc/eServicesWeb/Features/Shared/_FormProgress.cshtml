@model Uma.Eservices.Models.Shared.FormProgressModel
@{
    decimal percentage = Model.PageCount <= 1 ? 0 : 100 / (Model.PageCount - 1);
    var curPageNumber = Model.Pages.IndexOf(Model.CurrentPage) + 1;
}
<table class="form-progress-table">
    <tbody>
        <tr class="circle-row">
            @for (int stepCounter = 1; stepCounter <= Model.PageCount; stepCounter++)
            {
                bool isFirst = stepCounter == 1;
                bool isLast = stepCounter == Model.PageCount;
                
                <td class="circle-td">
                    <div class="progress-circle @(stepCounter < curPageNumber ? Html.Raw("green") : Html.Raw("")) img-circle">
                        <div class="progress-number">
                            <div class="number">
                                @stepCounter
                            </div>
                        </div>
                    </div>
                </td>
                if (!isLast)
                {
                    <td style="width: @percentage%">
                    </td>
                }
            }
        </tr>
        <tr>
            @for (int stepCounter = 1; stepCounter <= Model.PageCount; stepCounter++)
            {
                bool isFirst = stepCounter == 1;
                bool isLast = stepCounter == Model.PageCount;

                <td class="progress-title">@T(Model.Pages[stepCounter - 1].Title)</td>
                if (!isLast)
                {
                    <td />
                }
            }
        </tr>
    </tbody>
</table>