function attachCustomEvents(n){n.find(".help-tooltip").tooltip({container:"body",trigger:"hover click",placement:"auto top"});n.find(".selectpicker").selectpicker();n.find("input[maxlength]").maxlength();n.find(".input-group.date").datepicker().on("changeDate",function(){$(this).children("input").valid()});n.find(".input-group.date input").focus(function(){$(".input-group.date").datepicker("hide");this.select()});n.find(".btn-sm.formblocksubmit").click(function(){$(".accordion .expander-header").eq($(this).data("targetpanel")).click()});n.find(".expander-block").on("shown.bs.collapse",function(){var n=$(this)[0],t=n.offsetTop-190;$("html, body").animate({scrollTop:t},0)});n.find("form").each(function(n){var t=$($("form")[n]),i=t.find(".umaAjaxFileUpload"),r,h,a;if(i!=null&&i.length!=0){var l=i.attr("uploadUrl"),u=parseInt(i.attr("maxnumberoffiles")),o=parseInt(i.attr("minnumberoffiles")),s=0;fileUploadFormsCollection.push({form:t,uloadUrl:l,data:[]});isNaN(o)&&(o=-1);c();t.find("input").each(function(n){var r=$(t.find("input")[n]);if(r.attr("type")!=null&&r.attr("type")=="file"){r.attr("accept",i.attr("mimes"));(isNaN(u)||u>1)&&r.attr("multiple","multiple");return}});$(t.find(".template-upload")).livequery(function(n,t){currentMatch="";modelArrayLengthCounter=0;modelArrayLength($(t).parent());formatControlForRazor($(t).parent(),$(t));f()});$(t.find(".template-download")).livequery(function(n,t){currentMatch="";modelArrayLengthCounter=0;modelArrayLength($(t).parent());formatControlForRazor($(t).parent(),$(t));f();subscribeChildInputFieldsToAuotoSave($(t))});t.attr("enctype","multipart/form-data");r=[];t.fileupload({dropZone:t,url:l}).bind("fileuploadadd",function(n,t){r.push(t.files);e()}).bind("fileuploadfail",function(n,t){r.remove(t.files);e()}).bind("fileuploadfailed",function(){f()});t.fileupload("option",{maxFileSize:i.attr("maxFileSize"),acceptFileTypes:eval(i.attr("acceptfiletypes")),maxNumberOfFiles:isNaN(u)?"@":u,singleFileUploads:isNaN(u)?!0:!1,autoUpload:!0,completed:function(){s++;r=[];$.each(fileUploadFormsCollection,function(n,i){i.form==t&&(i.data=[])});e();c();f()},destroyed:function(){s--;c();f()},processfail:function(n,t){r.remove(t.files);e()}});h=!0;try{a=eval(i.attr("existingFilesVariable"))}catch(v){h=!1}h&&t.fileupload("option","done").call(t,$.Event("done"),{result:{files:eval(i.attr("existingFilesVariable"))}});function e(){r.length>0?t.find(".btn.start").removeAttr("disabled"):t.find(".btn.start").attr("disabled","disbaled")}function f(){t.find(".files").children().length>1?t.find(".empty-string").hide():t.find(".empty-string").show();changeModelArrayCounter=-1;currentMatch="";changeModelArray(t.find(".files"))}function c(){var n=i.attr("enablingids").split(",");n.forEach(function(n){s<o?$("#"+n).attr("disabled","disbaled"):$("#"+n).removeAttr("disabled")})}}});subscribeChildInputFieldsToAuotoSave(n)}function subscribeChildInputFieldsToAuotoSave(n){var t=$(n.closest("form")),i;if(t!=null&&t.attr("ajaxSavingUrl")!=null){i=t.attr("ajaxSavingUrl");n.find(".formblocksubmit").click(function(){ajaxFormPost(i,t)});n.find("input[type=text]").focusout(function(){ajaxFormPost(i,t)});n.find("input[type=radio]").click(function(){ajaxFormPost(i,t)});n.find(".input-group.date").datepicker().on("changeDate",function(){ajaxFormPost(i,t)});n.find("select").change(function(){ajaxFormPost(i,t)});n.find("input[type=checkbox]").click(function(){ajaxFormPost(i,t)});n.find("textarea").focusout(function(){ajaxFormPost(i,t)})}}function ajaxFormPost(n,t){ajaxRequestCount++;setTimeout(function(){doAjaxFormPost(n,t)},2e3)}function doAjaxFormPost(n,t){if(ajaxRequestCount--,ajaxRequestCount==0){var i=t.find("[name=__RequestVerificationToken]").val();t.__RequestVerificationToken=i;$.ajax({url:n,type:"POST",cache:!1,data:t.serializeObject(),success:function(){}})}}function checkHeight(n){var t=0;n.each(function(){t=Math.max(t,$(this).height())}).height(t)}function submitAllFileUploadForms(){return $.each(fileUploadFormsCollection,function(n,t){t.data.length==0?t.success=function(){submitNextFileUploadForm()}:t.form.bind("fileuploadcompleted",function(){submitNextFileUploadForm()})}),submitNextFileUploadForm(),!1}function submitNextFileUploadForm(){var n,t;if(fileUploadFormsCollection.length==0){$("form").last().submit();return}n=fileUploadFormsCollection[0];n.data.length<=1&&fileUploadFormsCollection.remove(n);n.data.length==0?$.ajax({url:n.uloadUrl,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({model:n.form.serializeObject()}),success:function(){n.success()}}):(t=n.data[0],n.data.remove(t),t.submit())}var fileUploadFormsCollection=[],ajaxRequestCount;$("form").each(function(n){var t=$($("form")[n]);subscribeChildInputFieldsToAuotoSave(t)});ajaxRequestCount=0;$(function(){checkHeight($(".height-h3"));checkHeight($(".height-1"));checkHeight($(".height-2"));checkHeight($(".height-3"))});jQuery(function(n){n.validator.addMethod("date",function(n,t){return this.optional(t)?!0:moment(n,t.attributes.placeholder.value.toUpperCase()).isValid()?!0:!1})});Array.prototype.remove=function(n){this.splice(this.indexOf(n)==-1?this.length:this.indexOf(n),1)};attachCustomEvents($(document));